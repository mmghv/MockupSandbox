<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="libs/metroui_v4.5.1.min.css">
  <style>
    body {
      padding: 10px;
    }
    body > :first-child {
      margin-top: 0;
    }

    .title {
      margin-top: 10px;
      margin-bottom: 10px;
      background-color: #484848;
      color: white;
      text-align: center;
      font-weight: bold;
      padding: 5px;
    }
    .button {
      transition: all .05s ease-in-out;
    }
    input[readonly] {
      background-color: #e8e8e8;
    }
  </style>
  <script>
    // console proxy
    const consoleMethods = ['log', 'error', 'clear']
    const realConsole = {}
    consoleMethods.forEach(method => {
      realConsole[method] = console[method]
      console[method] = (...args) => {
        realConsole[method](...args)
        const serializedData = args.map(arg => {
          if (typeof arg ==="string") {
            return args.length == 1 && arg !== '' ? arg : JSON.stringify(arg)
          } else {
            return String(arg)
          }
        })
        parent.window.postMessage({type: 'console', method, serializedData}, "*")
      }
    });

    window.addEventListener('message', function(e) {
      const blob = new Blob([e.data], { type: 'application/javascript' });
      const url = URL.createObjectURL(blob);

      const scriptElement = document.createElement("script");
      scriptElement.src = url;
      document.head.appendChild(scriptElement);
    });

    window.addEventListener('error', function(e) {
      e.preventDefault()
      const msg = e.message.replace(/^(Uncaught .+: )/, "$&\n");
      console.error(`${msg} (at line ${e.lineno})`);
    }, false)
  </script>

  <script src="ui-controls.js"></script>
  <script src="libs/metroui_v4.5.1.min.js"></script>
</head>
<body>
</body>
</html>